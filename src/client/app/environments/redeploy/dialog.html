<div class="modal-header bg-primary">
  <button type="button" class="close" data-dismiss="modal" ng-click="vm.close()"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
  <h4 class="modal-title">Redeploy '{{vm.tempEnv.envName}}'</h4>
</div>
<div class="modal-body">
  
  <form role="form">
    <div class="form-group">
      <label>Install from Branch:</label>
      <select 
        class="form-control" 
        ng-model="vm.selectedBranch.branch" 
        ng-options="branch for branch in vm.branches"
        ng-change="vm.branchChanged()" />
    </div>
    <div class="form-group" ng-show="vm.selectedBranch.branch">
      <label>Install Build:</label>
      <select 
        class="form-control" 
        ng-model="vm.selectedBranch.build" 
        ng-options="build for build in vm.builds" />
    </div>
    <deployinfo environment="vm.tempEnv"></deployinfo>    
  </form>

  <div class="advanced" ng-show="vm.showAdvanced">    
    <div ng-repeat="taskdef in vm.tempEnv.config.taskdefs">
      <input 
        type="checkbox"
        name="selectedTaskDefs[]"
        value="{{taskdef}}"
        ng-checked="vm.selectedTasks.indexOf(taskdef) > -1"
        ng-click="vm.toggleSelectedTask(taskdef)"
      >
      {{taskdef}}
    </div>
  </div>

</div>
<div class="modal-footer">  
  <a style="float: left" ng-click="vm.toggleAdvanced()">Advanced</a> 
  <button type="button" class="btn btn-primary " ng-click="vm.rebuild()">Start</button>
  <button type="button" class="btn btn-default" ng-click="vm.cancel()">Cancel</button>
</div>
